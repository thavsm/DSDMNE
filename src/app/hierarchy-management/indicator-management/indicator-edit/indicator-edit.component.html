<div style="margin-left: -1%;">
    <button mat-icon-button color="warn" (click)="closePopup()">
        <mat-icon>close</mat-icon>
    </button>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header card-header-rose card-header-icon">
                <div class="card-icon">
                    <i class="material-icons">assignment</i>
                </div>
                <h4 class="card-title">Edit Indicator</h4>
            </div>
            <div class="card-body">
                <div mat-dialog-content>
                    <mat-tab-group animationDuration="0ms">
                        <mat-tab label="Indicator Meta Data Form">
                            <div class="form-group">
                                <mat-form-field appearance="outline">
                                    <mat-label>Select a Location </mat-label>
                                    <mat-select [(ngModel)]="IndicatorAdd.locationID" >
                                        <mat-option *ngFor="let c of levels" [value]="c.levelID">
                                            {{c.levelName}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="form-group">
                                <mat-accordion>
                                    <ng-container *ngFor="let item of formDesign;let i= index;"
                                        style="background-color: white;text-align: left;height: 100px;font-weight: bold;">
                                    
                                        <!-- Date Type -->
                                        <ng-container *ngIf="item.recognitionType == 'Date' && item.status==='1'">
                                            <div class="form-group">
                                                <label style="font-size: medium;">{{item.questionName}}</label>
                                                <mat-form-field appearance="outline">
                                                    <input matInput type="date" [(ngModel)]=item.data placeholder="{{item.toolTip}}"  value="{{item.data}}">
                                                </mat-form-field>
                                                
                                            </div>
                                        </ng-container>
                                    
                                        <!-- Text Type -->
                                        <ng-container *ngIf="item.recognitionType == 'Text' && item.status=='1' ">
                                            <div class="form-group">
                                                <label style="font-size: medium;">{{item.questionName}}</label>
                                                <mat-form-field appearance="outline">
                                                    <input matInput ngModel type="text" [(ngModel)]=item.data placeholder="{{item.toolTip}}" value="{{item.data}}" maxlength={{item.lengthValidation}}>
                                                </mat-form-field>
                                            </div>
                                        </ng-container>
                                    
                                        <!-- Number Type -->
                                        <ng-container *ngIf="item.recognitionType=='Number' && item.status=='1' ">
                                            <div class="form-group">
                                                <label style="font-size: medium;">{{item.questionName}}</label>
                                                <mat-form-field appearance="outline">
                                                    <input matInput type="number" ngModel maxlength={{item.lengthValidation}}
                                                        oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength); this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                        [(ngModel)]=item.data placeholder="{{item.toolTip}}" value="{{item.data}}" >
                                                </mat-form-field>
                                                <!-- <div style="height: 5px;"></div> -->
                                            </div>
                                        </ng-container>
                            
                                        <!-- select Type -->
                                        <ng-container *ngIf="item.recognitionType=='List' && item.status=='1' ">
                                            <div class="form-group">
                                                <label style="font-size: medium;">{{item.questionName}}</label>
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Select a option</mat-label>
                                                    <mat-select  [(ngModel)]=item.data>
                                                        <mat-option *ngFor="let list of item.listValue" style="color: black;" [value]="list.value">
                                                            {{list.name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <!-- <div style="height: 5px;"></div> -->
                                            </div>
                                        </ng-container>
                                                 
                                        <!-- URL-->
                                        <ng-container *ngIf="item.recognitionType == 'URL' && item.status=='1' ">
                                            <div class="form-group">
                                                <label style="font-size: medium;">{{item.questionName}}</label>
                                                <mat-form-field appearance="outline">
                                                    <input matInput ngModel type="text" [(ngModel)]=item.data placeholder="{{item.toolTip}}" value="{{item.data}}" maxlength={{item.lengthValidation}}>
                                                </mat-form-field>
                                            </div>
                                        </ng-container>
                            
                                    </ng-container>            
                                </mat-accordion>
                            </div>
                
                            <div class="form-group">
                                <button (click)="addForm()" class="btn btn-md btn-primary">Save</button>
                                <button mat-button [mat-dialog-close]="" class="btn btn-md btn-primary">Cancel</button>               
                            </div>
                        </mat-tab>
                        <mat-tab label="Datasource Mapping">
                        
                            <div class="form-group" *ngIf="divContorls">
                                <div class="form-group">
                                    <mat-form-field appearance="outline">
                                        <mat-label>*Datasource Type</mat-label>
                                        <mat-select [(ngModel)]="ExternalData.name" (selectionChange)="onType($event)" [disabled]="isDisabled">
                                            <mat-option *ngFor="let c of ExternalDataType" [value]="c.externalDataTypeID">
                                                {{c.name}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                        
                                <div class="form-group" *ngIf="divIsForm">
                                    <!-- <div class="form-group">
                                        <mat-form-field appearance="outline">
                                            <mat-label>Select an Indicator</mat-label>
                                            <mat-select [(ngModel)]="NodeData.indicatorID">
                                                <mat-select-filter [placeholder]="'Search'" [displayMember]="'indicatorName'" [array]="Indicators"
                                                    (filteredReturn)="filteredIndicators =$event"></mat-select-filter>
                                                <mat-option *ngFor="let c of filteredIndicators" [value]="c.indicatorID">
                                                    {{c.indicatorName}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div> -->
                        
                                    <div class="form-group">
                                        <mat-form-field appearance="outline">
                                            <mat-label>Form Category</mat-label>
                                            <mat-select [(ngModel)]="NodeData.FormCategory" (selectionChange)="onIsformCategoryChange($event)">
                                                <mat-option *ngFor="let c of FormCategory" [value]="c.formCategoryID">
                                                    {{c.name}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                        
                        
                                    <div class="form-group" *ngIf="divIsFormD">
                                        <mat-form-field appearance="outline">
                                            <mat-label>Form Name</mat-label>
                                            <mat-select [(ngModel)]="NodeData.FormName" (selectionChange)="onformChangeIsForm($event)">
                                                <mat-option *ngFor="let c of Formfiltered" [value]="c.formID">
                                                    {{c.displayName}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                        
                        
                                    <div class="form-group" *ngIf="divIsFormField">
                                        <mat-form-field appearance="outline">
                                            <mat-label>Form Field</mat-label>
                                            <mat-select [(ngModel)]="NodeData.fName" (selectionChange)="onIsformfieldChange($event)">
                                                <mat-select-filter [placeholder]="'Search'" [displayMember]="'questionName'"
                                                    [array]="FormFields" (filteredReturn)="filteredFormFields =$event"></mat-select-filter>
                                                <mat-option *ngFor="let c of filteredFormFields" [value]="c.fieldID">
                                                    {{c.questionName}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                        
                                    <div class="form-group">
                                        <button (click)="openFormDesign()" class="btn btn-md btn-primary">Preview</button>
                                    </div>
                        
                                </div>
                        
                                <div class="form-group" *ngIf="divNotForm">
                                    <div class="form-group" *ngIf="divFormCat">
                                        <mat-form-field appearance="outline">
                                            <mat-label>*Form Category</mat-label>
                                            <mat-select [(ngModel)]="ExternalData.FormCategory"
                                                (selectionChange)="onformCategoryChange($event)">
                                                <mat-option *ngFor="let c of FormCategory" [value]="c.formCategoryID">
                                                    {{c.name}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                        
                                    <div class="form-group" *ngIf="divImportTableName">
                                        <mat-form-field appearance="outline">
                                            <mat-label>*Import Table Name</mat-label>
                                            <mat-select [(ngModel)]="ExternalData.uploadName" (selectionChange)="onUploadNameChange($event)">
                                                <mat-option *ngFor="let c of DataImportUpload" [value]="c.uploadName">
                                                    {{c.uploadName}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                        
                                    <div class="form-group" *ngIf="divExternalDataName">
                                        <mat-form-field appearance="outline">
                                            <mat-label>*External Data Connection Name</mat-label>
                                            <mat-select [(ngModel)]="ExternalData.connectString" (selectionChange)="onDataservice($event)">
                                                <mat-option *ngFor="let c of Dataservice" [value]="c.connectString">
                                                    {{c.initialCatalog}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                        
                                    <div class="form-group" *ngIf="divExternalTableDataName">
                                        <mat-form-field appearance="outline">
                                            <mat-label>*External Data Table Name</mat-label>
                                            <mat-select [(ngModel)]="ExternalData.tablE_NAME"
                                                (selectionChange)="onExternalDataTableName($event)">
                                                <mat-option *ngFor="let c of ExternalDataTableName" [value]="c.tablE_NAME">
                                                    {{c.tablE_NAME}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                        
                        
                                    <div class="form-group" *ngIf="divColName">
                                        <mat-form-field appearance="outline">
                                            <mat-label>*Table Column Name</mat-label>
                                            <mat-select [(ngModel)]="ExternalData.column_name" (selectionChange)="onColName($event)">
                                                <mat-option *ngFor="let c of TableColumns" [value]="c.column_name">
                                                    {{c.column_name}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                        
                        
                        
                                    <div class="form-group" *ngIf="divForm">
                                        <mat-form-field appearance="outline">
                                            <mat-label>*Form Name</mat-label>
                                            <mat-select [(ngModel)]="ExternalData.FormName" (selectionChange)="onformChange($event)">
                                                <mat-option *ngFor="let c of Form" [value]="c.formID">
                                                    {{c.displayName}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                        
                        
                                    <div class="form-group" *ngIf="divFormField">
                                        <mat-form-field appearance="outline">
                                            <mat-label>Form Field</mat-label>
                                            <mat-select [(ngModel)]="ExternalData.fName" (selectionChange)="onformfieldChange($event)">
                                                <mat-select-filter [placeholder]="'Search'" [displayMember]="'questionName'"
                                                    [array]="FormFields" (filteredReturn)="filteredFormFields =$event"></mat-select-filter>
                                                <mat-option *ngFor="let c of filteredFormFields" [value]="c.fieldID">
                                                    {{c.questionName}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                        
                                    <div class="form-group" *ngIf="divSearchCriteriaCmb">
                                        <mat-form-field appearance="outline">
                                            <mat-label>*Search Criteria</mat-label>
                                            <mat-select [(ngModel)]="ExternalData.ArraySearchCriteria" multiple>
                                                <mat-option *ngFor="let list of listCategory" style="color: black;" [value]="list.value">
                                                    {{list.name}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                        
                                    <div class="form-group" *ngIf="divSearchCriteriaTxt">
                                        <div class="form-group">
                                            <label style="font-size: medium;">*Search Criteria</label>
                                            <mat-form-field appearance="outline">
                                                <input matInput ngModel type="text" [(ngModel)]="ExternalData.SearchCriteria">
                                            </mat-form-field>
                                        </div>
                                    </div>
                        
                                    <div class="form-group" *ngIf="divSearchCriteriaNmb">
                                        <div class="form-group">
                                            <label style="font-size: medium;">*Search Criteria</label>
                                            <mat-form-field appearance="outline">
                                                <input matInput ngModel type="number" [(ngModel)]="ExternalData.SearchCriteria">
                                            </mat-form-field>
                                        </div>
                                    </div>
                        
                                    <div class="form-group" *ngIf="divSearchCriteriaDate">
                                        <div class="form-group">
                                            <label style="font-size: medium;">*Search Criteria</label>
                                            <mat-form-field appearance="outline">
                                                <input matInput type="date" [(ngModel)]="ExternalData.SearchCriteria">
                                            </mat-form-field>
                                        </div>
                                    </div>
                        
                                    <div class="form-group" *ngIf="divOperator">
                                        <div class="form-group">
                                            <mat-radio-group aria-label="Operator" [(ngModel)]="ExternalData.selection">
                                                <mat-radio-button value="+">Add</mat-radio-button>
                                                <mat-radio-button value="-">Subtract</mat-radio-button>
                                                <mat-radio-button value="*">Multiply</mat-radio-button>
                                                <mat-radio-button value="/">Divide</mat-radio-button>
                                            </mat-radio-group>
                                        </div>
                                    </div>
                        
                                    <div class="form-group">
                                        <button mat-button (click)="addCalculation()" class="btn btn-md btn-primary">Add
                                            Calculation</button>&nbsp;
                                        <button mat-button (click)="Clear()" class="btn btn-md btn-primary">Clear</button>
                                    </div>
                        
                                    <ng-container>
                                        <div class="form-group">
                                            <label style="font-size: medium;">*Calculation</label>
                                            <mat-form-field appearance="outline">
                                                <input matInput ngModel type="text" value="{{ExternalData.calculation}}"
                                                    [(ngModel)]="ExternalData.calculation" disabled>
                                            </mat-form-field>
                                        </div>
                                    </ng-container>
                        
                        
                                    <ng-container>
                                        <div class="form-group">
                                            <label style="font-size: medium;">*Value</label>
                                            <mat-form-field appearance="outline">
                                                <input matInput ngModel type="text" value="{ExternalData.calcVal}"
                                                    [(ngModel)]="ExternalData.calcVal" disabled>
                                            </mat-form-field>
                                        </div>
                                    </ng-container>
                        
                        
                                    <div class="form-group" *ngIf="divAdd">
                                        <button mat-button class="btn btn-md btn-primary" (click)="addCompCalculation()"
                                            [disabled]="isAddDisabled">Add</button>
                                    </div>
                        
                                    <div class="form-group" *ngIf="divEdit">
                                        <button mat-button class="btn btn-md btn-primary" (click)="EditCompCalculation()">Edit</button>
                                        <!-- &nbsp;
                                                    <button mat-button  
                                                       class="btn btn-md btn-primary" (click)="RefreshCalculation()">Refresh Calculation</button> -->
                                    </div>
                        
                                    <div class="form-group">
                                        <kendo-grid [kendoGridBinding]="ExtData" [pageSize]="5" [pageable]="true"
                                            [filterable]="true" [sortable]="true" [groupable]="false" [resizable]="true">
                                            <kendo-grid-column field="externalDataName" title="Name" [width]="6">
                                            </kendo-grid-column>
                                            <kendo-grid-column field="externalDataType" title="Type" [width]="6">
                                            </kendo-grid-column>
                                            <kendo-grid-column field="calculationField" title="Calculation" [width]="6">
                                            </kendo-grid-column>
                                            <kendo-grid-column field="value" title="Value" [width]="6">
                                            </kendo-grid-column>
                                            <kendo-grid-column [width]="1">
                                                <ng-template kendoGridCellTemplate let-dataItem>
                                                    <button mat-icon-button (click)="clickRefresh(dataItem)">
                                                        <mat-icon matTooltip="refresh" class="mat-18" style="color:#bf7c00;">refresh
                                                        </mat-icon>
                                                    </button>
                                                </ng-template>
                                            </kendo-grid-column>
                                            <kendo-grid-column [width]="1">
                                                <ng-template kendoGridCellTemplate let-dataItem>
                                                    <button mat-icon-button (click)="clickEdit(dataItem)">
                                                        <mat-icon matTooltip="Edit" class="mat-18" style="color:#bf7c00;">edit
                                                        </mat-icon>
                                                    </button>
                                                </ng-template>
                                            </kendo-grid-column>
                                            <kendo-grid-column [width]="1">
                                                <ng-template kendoGridCellTemplate let-dataItem>
                                                    <button mat-icon-button (click)="clickDelete(dataItem)">
                                                        <mat-icon matTooltip="Delete Calculation" class="mat-18" style="color: #ff0000;">delete
                                                        </mat-icon>
                                                    </button>
                                                </ng-template>
                                            </kendo-grid-column>
                                        </kendo-grid>
                                    </div>
                
                                    <!-- <div class="form-group">
                                        <div class="col-md-12">
                                            <table class="table">
                                                <thead class="thead-light">
                                                    <tr>
                                                        <th class="th">Name</th>
                                                        <th class="th">Type</th>
                                                        <th class="th">Calculation</th>
                                                        <th class="th">Value</th>
                                                        <th class="th">Refresh</th>
                                                        <th class="th" *ngIf="thEdit">Edit</th>
                                                        <th class="th" *ngIf="thDelete">Delete</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr
                                                        *ngFor="let pd of service.ExternalMetadata | paginate: { itemsPerPage: 5, currentPage: p }">
                                                        <td>{{pd.externalDataName}}</td>
                                                        <td>{{pd.externalDataType}}</td>
                                                        <td>{{pd.calculationField}}</td>
                                                        <td>{{pd.value}}</td>
                                                        <td><button type="button" class="btn btn-secondary" (click)="clickRefresh(pd)"><i
                                                                    class="fa fa-refresh" aria-hidden="true"></i></button></td>
                                                        <td *ngIf="thEdit"><button type="button" class="btn btn-secondary"
                                                                (click)="clickEdit(pd)"><i class="fa fa-pencil" aria-hidden="true"></i></button>
                                                        </td>
                                                        <td *ngIf="thDelete"><button type="button" class="btn btn-danger"
                                                                (click)="clickDelete(pd)"><i class="fa fa-trash"
                                                                    aria-hidden="true"></i></button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                        
                                            <pagination-controls (pageChange)="p = $event"></pagination-controls>
                        
                                            <div style="text-align: right;margin-right: 100px;">
                                                <mat-label>Total Value = </mat-label>
                                                <input type="number" placeholder="0.00" value="{CalTotalVal.total}"
                                                    [(ngModel)]="CalTotalVal.total" />
                                            </div>
                                        </div>
                                    </div> -->
                                </div>
                            </div>
                            <!-- <div>
                                        <app-externaldata-add></app-externaldata-add>
                                    </div> -->
                            <!-- <div class="form-group"> 
                                    
                                        <div class="form-group">
                                            <mat-form-field appearance="outline">
                                                <mat-label>*Field Type</mat-label>
                                                <mat-select [(ngModel)]="NodeData.name" (selectionChange)="onType($event)">
                                                    <mat-option *ngFor="let c of ExternalDataType" [value]="c.externalDataTypeID">
                                                        {{c.name}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                    
                                        <div class="form-group" *ngIf="divFTIContorls">
                                            <div class="form-group">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Select an Indicator</mat-label>
                                                    <mat-select [(ngModel)]="NodeData.indicatorID">  
                                                        <mat-select-filter [placeholder]="'Search'" [displayMember]="'indicatorName'" [array]="Indicators" (filteredReturn)="filteredIndicators =$event"></mat-select-filter>                          
                                                        <mat-option *ngFor="let c of filteredIndicators" [value]="c.indicatorID">
                                                            {{c.indicatorName}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                    
                                            <div class="form-group">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Form Category</mat-label>
                                                    <mat-select [(ngModel)]="NodeData.FormCategory" (selectionChange)="onEXTformCategoryChange($event)" >
                                                        <mat-option *ngFor="let c of FormCategory" [value]="c.formCategoryID">
                                                            {{c.name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            
                                            <div class="form-group" *ngIf="divForm">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Form Name</mat-label>
                                                    <mat-select [(ngModel)]="NodeData.FormName" (selectionChange)="onEXTformChange($event)" >
                                                        <mat-option *ngFor="let c of Form" [value]="c.formID">
                                                            {{c.displayName}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                    
                                    
                                            <div class="form-group" *ngIf="divFormField" > 
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Form Field</mat-label>
                                                    <mat-select [(ngModel)]="NodeData.fName" (selectionChange)="onformfieldChange($event)" >
                                                        <mat-select-filter [placeholder]="'Search'" [displayMember]="'questionName'" [array]="FormFields" (filteredReturn)="filteredFormFields =$event"></mat-select-filter>                         
                                                        <mat-option *ngFor="let c of filteredFormFields" [value]="c.fieldID">
                                                            {{c.questionName}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                            
                                            <div class="form-group">
                                                <button (click)="openFormDesign()" class="btn btn-md btn-primary">Preview</button>
                                            </div>
                            
                                            <div class="form-group">
                                                <button  (click)="OpenExternalData()"
                                                    class="btn btn-md btn-primary"   >Configure External Data</button>
                                            </div>                                    
                                        </div>
                        
                                        <div class="form-group" *ngIf="divEXTContorls">
                                            <div class="form-group" *ngIf="divFormCat">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>*Form Category</mat-label>
                                                    <mat-select [(ngModel)]="NodeData.FormEXTCategory" (selectionChange)="onformCategoryChange($event)">
                                                        <mat-option *ngFor="let c of FormCategory" [value]="c.formCategoryID">
                                                            {{c.name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                        
                                            <div class="form-group" *ngIf="divImportTableName">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>*Import Table Name</mat-label>
                                                    <mat-select [(ngModel)]="NodeData.uploadName" (selectionChange)="onUploadNameChange($event)">
                                                        <mat-option *ngFor="let c of DataImportUpload" [value]="c.uploadName">
                                                            {{c.uploadName}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                        
                                            <div class="form-group" *ngIf="divExternalDataName">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>*External Data Connection Name</mat-label>
                                                    <mat-select [(ngModel)]="NodeData.connectString" (selectionChange)="onDataservice($event)">
                                                        <mat-option *ngFor="let c of Dataservice" [value]="c.connectString">
                                                            {{c.initialCatalog}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        
                                            <div class="form-group" *ngIf="divExternalTableDataName">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>*External Data Table Name</mat-label>
                                                    <mat-select [(ngModel)]="NodeData.tablE_NAME" (selectionChange)="onExternalDataTableName($event)">
                                                        <mat-option *ngFor="let c of ExternalDataTableName" [value]="c.tablE_NAME">
                                                            {{c.tablE_NAME}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        
                                            <div class="form-group" *ngIf="divColName">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>*Table Column Name</mat-label>
                                                    <mat-select [(ngModel)]="NodeData.column_name"  (selectionChange)="onColName($event)">
                                                        <mat-option *ngFor="let c of TableColumns" [value]="c.column_name">
                                                            {{c.column_name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                            
                                            <div class="form-group"  *ngIf="divEXTForm" >
                                                <mat-form-field appearance="outline">
                                                    <mat-label>*Form Name</mat-label>
                                                    <mat-select [(ngModel)]="NodeData.FormName" (selectionChange)="onformChange($event)">
                                                        <mat-option *ngFor="let c of Form" [value]="c.formID">
                                                            {{c.formName}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                        
                                            <div class="form-group"  *ngIf="divEXTFormField" >
                                                <mat-form-field appearance="outline">
                                                    <mat-label>*Form Field</mat-label>
                                                    <mat-select [(ngModel)]="NodeData.fName" (selectionChange)="onEXTformfieldChange($event)">
                                                        <mat-option *ngFor="let c of FormFields" [value]="c.fieldID">
                                                            {{c.dataExportName}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                        
                                            <div class="form-group"  *ngIf="divSearchCriteriaCmb" >
                                                <mat-form-field appearance="outline">
                                                    <mat-label>*Search Criteria</mat-label>
                                                    <mat-select  [(ngModel)]="NodeData.ArraySearchCriteria" multiple>
                                                        <mat-option *ngFor="let list of listCategory" style="color: black;" [value]="list.value">
                                                            {{list.name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        
                                            <div class="form-group"  *ngIf="divSearchCriteriaTxt" >
                                                <div class="form-group">
                                                    <label style="font-size: medium;">*Search Criteria</label>
                                                    <mat-form-field appearance="outline">
                                                        <input matInput ngModel type="text" [(ngModel)]="NodeData.SearchCriteria">
                                                    </mat-form-field>
                                                </div>
                                            </div>
                        
                                            <div class="form-group"  *ngIf="divSearchCriteriaNmb" >
                                                <div class="form-group">
                                                    <label style="font-size: medium;">*Search Criteria</label>
                                                    <mat-form-field appearance="outline">
                                                        <input matInput ngModel type="number" [(ngModel)]="NodeData.SearchCriteria">
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                        
                                            <div class="form-group"  *ngIf="divSearchCriteriaDate" >
                                                <div class="form-group">
                                                    <label style="font-size: medium;">*Search Criteria</label>
                                                    <mat-form-field appearance="outline">
                                                        <input matInput type="date" [(ngModel)]="NodeData.SearchCriteria">
                                                    </mat-form-field>
                                                </div>
                                            </div>
                        
                                            <div class="form-group"  *ngIf="divOperator" >
                                                <div class="form-group">
                                                    <mat-radio-group aria-label="Operator" [(ngModel)]="NodeData.selection">
                                                        <mat-radio-button value="+">Add</mat-radio-button>
                                                        <mat-radio-button value="-">Subtract</mat-radio-button>
                                                        <mat-radio-button value="*">Multiply</mat-radio-button>
                                                        <mat-radio-button value="/">Divide</mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                            </div>
                        
                                            <div class="form-group">
                                                <button mat-button  (click)="addCalculation()" 
                                                  class="btn btn-md btn-primary">Add Calculation</button>&nbsp;
                                                  <button mat-button   (click)="EXTClear()" 
                                                  class="btn btn-md btn-primary">Clear</button>
                                            </div>
                        
                                        </div>
                                    </div>    -->
                        
                            <div class="form-group">
                                <button (click)="addIndicatorLink()" class="btn btn-md btn-primary" *ngIf="divIsForm">Save</button>
                                <button mat-button [mat-dialog-close]="" class="btn btn-md btn-primary">Cancel</button>
                                <button (click)="deleteLink()" class="btn btn-md btn-primary" *ngIf="divIsForm">Delete Link</button>
                            </div>
                        </mat-tab>
                    </mat-tab-group>
                    <ngx-spinner bdColor="rgba(	237, 237, 237,0.8)" size="medium" color="black" type="ball-scale-multiple">
                      <p style="font-size: 20px; color: black">Processing...</p>
                    </ngx-spinner>    
                </div>
            </div>
        </div>
    </div>
</div>



